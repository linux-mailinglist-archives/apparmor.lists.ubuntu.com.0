Return-Path: <apparmor-bounces@lists.ubuntu.com>
X-Original-To: lists+apparmor@lfdr.de
Delivered-To: lists+apparmor@lfdr.de
Received: from huckleberry.canonical.com (huckleberry.canonical.com [91.189.94.19])
	by mail.lfdr.de (Postfix) with ESMTPS id C6FE43D8221
	for <lists+apparmor@lfdr.de>; Tue, 27 Jul 2021 23:52:24 +0200 (CEST)
Received: from localhost ([127.0.0.1] helo=huckleberry.canonical.com)
	by huckleberry.canonical.com with esmtp (Exim 4.86_2)
	(envelope-from <apparmor-bounces@lists.ubuntu.com>)
	id 1m8Uzg-0007tb-0h; Tue, 27 Jul 2021 21:52:08 +0000
Received: from smtp-relay-canonical-0.internal ([10.131.114.83]
 helo=smtp-relay-canonical-0.canonical.com)
 by huckleberry.canonical.com with esmtps
 (TLS1.2:ECDHE_RSA_AES_128_GCM_SHA256:128) (Exim 4.86_2)
 (envelope-from <georgia.garcia@canonical.com>) id 1m8Uzd-0007tD-Pw
 for apparmor@lists.ubuntu.com; Tue, 27 Jul 2021 21:52:05 +0000
Received: from mail-pl1-f199.google.com (mail-pl1-f199.google.com
 [209.85.214.199])
 (using TLSv1.3 with cipher TLS_AES_256_GCM_SHA384 (256/256 bits)
 key-exchange X25519 server-signature RSA-PSS (2048 bits) server-digest SHA256)
 (No client certificate requested)
 by smtp-relay-canonical-0.canonical.com (Postfix) with ESMTPS id C4E7C3F344
 for <apparmor@lists.ubuntu.com>; Tue, 27 Jul 2021 21:52:03 +0000 (UTC)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=canonical.com;
 s=20210705; t=1627422723;
 bh=5UlkiBNEF8aTeiYzdE45kZy+0ilBZqZu39dqkyhRJkA=;
 h=From:To:Cc:Subject:Date:Message-Id:MIME-Version;
 b=srZL67mk7/RVO9IuOiGPqGBwx5IGhDsLI0FqQgKNCuTrIoIEDu8pQavB/2cqBeqwb
 1YZ7GmPd5z9+1A2WTvDl3Fz4sH/ZlOuyvv/9G6KlISCWyF//FHqjsq6jttYP+8fjCI
 RnKmGoQlQLCZ8a3xnWAOJxKWuiblApglguEa4ftKp6RqwMLtphd5XNhmMDgO69/GP8
 gsaHdHD+nZoBEfqZc633Lr6T320vMyXgD/RUKqh6Qj0jvli9FR4bguSEJOVlcOc84q
 7aEwxRbZurZ0yTJW2eCJmh1M6NHV0Np0P3do1Z1a/4dmSUGRa2v05j0hDYsnSaM/Cw
 4XgQ3i2ckKH2Q==
Received: by mail-pl1-f199.google.com with SMTP id
 d19-20020a170902c193b029012c5a07a983so109792pld.1
 for <apparmor@lists.ubuntu.com>; Tue, 27 Jul 2021 14:52:03 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:mime-version
 :content-transfer-encoding;
 bh=5UlkiBNEF8aTeiYzdE45kZy+0ilBZqZu39dqkyhRJkA=;
 b=e7R6G7dwzG46uV77TlmSK1CI8yCCn2SeWNR6HemrTz6PSoBKcDq/MqXoSRC/mgpM8L
 87CcGOqFPJw1hVbPMxPZp6Pec3mLYcfU6bgbYlE+mH9VMG03d+EZsJoZS/WoFiZVYWMi
 d9GbvJAxSRAGPUZguLPq0MrLm64qRexsKFNjA3hgszgbz93njHIY8KBc49ehtQU6gc4m
 I7QLEPCM3pmL0mb7JysR6RTUMqLKzqgAleGWTocuZobx4Z1tqyVBdm91KayQtdHexd4n
 4VaHpVr0jkQWOIlPn5lmNeDexccmFSU09EbXUkSeymU3VNc2OnshZXh4jnPHynag81R2
 1H2Q==
X-Gm-Message-State: AOAM531suBYNIeMSXiq7reWfyw9DK0l4hhDF7e9JVUe4mvG81MEzEhyw
 9To9K6d6KgH61u3Z9/+ijZPQ2FvIOwyWVwQbBBp5/nH9GT3a3IhWCgaCAm9ovnGYwckVK0TuJrF
 Tq//NFaMJcY9CctAgc38i+oftMbxYjEccMyHTIw==
X-Received: by 2002:a63:1205:: with SMTP id h5mr25164859pgl.204.1627422721018; 
 Tue, 27 Jul 2021 14:52:01 -0700 (PDT)
X-Google-Smtp-Source: ABdhPJyQGfncq/d0xAU0/6vDUeADiThXcSvZJM7jndgonrLXbUgczvmBWL7mlErpYxw/JSeGibzHmQ==
X-Received: by 2002:a63:1205:: with SMTP id h5mr25164843pgl.204.1627422720757; 
 Tue, 27 Jul 2021 14:52:00 -0700 (PDT)
Received: from localhost ([2001:67c:1562:8007::aac:4557])
 by smtp.gmail.com with ESMTPSA id k10sm4631486pfc.169.2021.07.27.14.51.57
 (version=TLS1_3 cipher=TLS_AES_128_GCM_SHA256 bits=128/128);
 Tue, 27 Jul 2021 14:52:00 -0700 (PDT)
From: Georgia Garcia <georgia.garcia@canonical.com>
To: apparmor@lists.ubuntu.com
Date: Tue, 27 Jul 2021 18:51:34 -0300
Message-Id: <20210727215134.514951-1-georgia.garcia@canonical.com>
X-Mailer: git-send-email 2.25.1
MIME-Version: 1.0
Subject: [apparmor] [PATCH] apparmor: enable raw text policy
X-BeenThere: apparmor@lists.ubuntu.com
X-Mailman-Version: 2.1.20
Precedence: list
List-Id: AppArmor discussion <apparmor.lists.ubuntu.com>
List-Unsubscribe: <https://lists.ubuntu.com/mailman/options/apparmor>,
 <mailto:apparmor-request@lists.ubuntu.com?subject=unsubscribe>
List-Archive: <https://lists.ubuntu.com/archives/apparmor>
List-Post: <mailto:apparmor@lists.ubuntu.com>
List-Help: <mailto:apparmor-request@lists.ubuntu.com?subject=help>
List-Subscribe: <https://lists.ubuntu.com/mailman/listinfo/apparmor>,
 <mailto:apparmor-request@lists.ubuntu.com?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: apparmor-bounces@lists.ubuntu.com
Sender: "AppArmor" <apparmor-bounces@lists.ubuntu.com>

Q3VycmVudGx5IHRoZXJlJ3Mgbm8gd2F5IHRvIGludHJvc3BlY3QgdGhlIGN1cnJlbnQgdGV4dCBw
b2xpY3kgZm9yIGEKZ2l2ZW4gcHJvZmlsZS4gVGhpcyBhZGRzIHRoZSBmdW5jdGlvbmFsaXR5IG9m
IGhhdmluZyB0aGUgcmF3CnRleHQgcHJvZmlsZSBpbiB0aGUgcmF3ZGF0YSBmcyB3aGVuIGVuYWJs
ZWQgYnkgYSBjb25maWcuCgpJdCByZXVzZXMgdGhlIHJhd19kYXRhIGRhdGEgc3RydWN0dXJlIGJ5
IHN0b3JpbmcgdGhlIG9mZnNldCB0byB0aGUKdGV4dCBwb2xpY3kgYW5kIGl0cyBzaXplLiBUaGF0
IG1lYW5zIHRoYXQgdGhlIHJhdyB0ZXh0IGlzIGNvbXByZXNzZWQKYW5kIG11c3QgYmUgZGVjb21w
cmVzc2VkIGZvciByZWFkaW5nLiBUaGUgaW5mcmFzdHJ1Y3R1cmUgdG8gZG8gc28Kd2FzIHJldXNl
ZCBmcm9tIHJhd19kYXRhLgoKU2lnbmVkLW9mZi1ieTogR2VvcmdpYSBHYXJjaWEgPGdlb3JnaWEu
Z2FyY2lhQGNhbm9uaWNhbC5jb20+Ci0tLQogc2VjdXJpdHkvYXBwYXJtb3IvS2NvbmZpZyAgICAg
ICAgICAgICAgICAgfCAgOCArKysrCiBzZWN1cml0eS9hcHBhcm1vci9hcHBhcm1vcmZzLmMgICAg
ICAgICAgICB8IDQ2ICsrKysrKysrKysrKysrKysrKysrKysrCiBzZWN1cml0eS9hcHBhcm1vci9p
bmNsdWRlL2FwcGFybW9yLmggICAgICB8ICAxICsKIHNlY3VyaXR5L2FwcGFybW9yL2luY2x1ZGUv
YXBwYXJtb3Jmcy5oICAgIHwgIDEgKwogc2VjdXJpdHkvYXBwYXJtb3IvaW5jbHVkZS9wb2xpY3lf
dW5wYWNrLmggfCAgMyArKwogc2VjdXJpdHkvYXBwYXJtb3IvbHNtLmMgICAgICAgICAgICAgICAg
ICAgfCAgNiArKysKIHNlY3VyaXR5L2FwcGFybW9yL3BvbGljeV91bnBhY2suYyAgICAgICAgIHwg
MjcgKysrKysrKysrKystLQogNyBmaWxlcyBjaGFuZ2VkLCA4OSBpbnNlcnRpb25zKCspLCAzIGRl
bGV0aW9ucygtKQoKZGlmZiAtLWdpdCBhL3NlY3VyaXR5L2FwcGFybW9yL0tjb25maWcgYi9zZWN1
cml0eS9hcHBhcm1vci9LY29uZmlnCmluZGV4IDM0OGVkNmNmYTA4YS4uYjhkNjRmNTExNzQyIDEw
MDY0NAotLS0gYS9zZWN1cml0eS9hcHBhcm1vci9LY29uZmlnCisrKyBiL3NlY3VyaXR5L2FwcGFy
bW9yL0tjb25maWcKQEAgLTQwLDYgKzQwLDE0IEBAIGNvbmZpZyBTRUNVUklUWV9BUFBBUk1PUl9I
QVNIX0RFRkFVTFQKIAkgdGhlc2UgY2FzZXMgcG9saWN5IGhhc2hpbmcgY2FuIGJlIGRpc2FibGVk
IGJ5IGRlZmF1bHQgYW5kCiAJIGVuYWJsZWQgb25seSBpZiBuZWVkZWQuCiAKK2NvbmZpZyBTRUNV
UklUWV9BUFBBUk1PUl9URVhUX1BST0ZJTEUKKyAgICAgICBib29sICJFbmFibGUgc3RvcmFnZSBh
bmQgaW50cm9zcGVjdGlvbiBvZiByYXcgdGV4dCBwcm9maWxlIgorICAgICAgIGRlcGVuZHMgb24g
U0VDVVJJVFlfQVBQQVJNT1IKKyAgICAgICBkZWZhdWx0IG4KKyAgICAgICBoZWxwCisgICAgICAg
ICBUaGlzIG9wdGlvbiBzZWxlY3RzIHdoZXRoZXIgcmF3IHRleHQgcHJvZmlsZXMgY2FuIGJlIGxv
YWRlZAorCSBhbmQgaW50cm9zcGVjdGVkIHZpYSB0aGUgYXBwYXJtb3IgZmlsZXN5c3RlbS4KKwog
Y29uZmlnIFNFQ1VSSVRZX0FQUEFSTU9SX0RFQlVHCiAJYm9vbCAiQnVpbGQgQXBwQXJtb3Igd2l0
aCBkZWJ1ZyBjb2RlIgogCWRlcGVuZHMgb24gU0VDVVJJVFlfQVBQQVJNT1IKZGlmZiAtLWdpdCBh
L3NlY3VyaXR5L2FwcGFybW9yL2FwcGFybW9yZnMuYyBiL3NlY3VyaXR5L2FwcGFybW9yL2FwcGFy
bW9yZnMuYwppbmRleCAyZWUzYjNkMjlmMTAuLjQxZTk1MmQ0MWZmMSAxMDA2NDQKLS0tIGEvc2Vj
dXJpdHkvYXBwYXJtb3IvYXBwYXJtb3Jmcy5jCisrKyBiL3NlY3VyaXR5L2FwcGFybW9yL2FwcGFy
bW9yZnMuYwpAQCAtMTMzNSw2ICsxMzM1LDE4IEBAIHN0YXRpYyBpbnQgZGVmbGF0ZV9kZWNvbXBy
ZXNzKGNoYXIgKnNyYywgc2l6ZV90IHNsZW4sIGNoYXIgKmRzdCwgc2l6ZV90IGRsZW4pCiAJcmV0
dXJuIGVycm9yOwogfQogCitzdGF0aWMgc3NpemVfdCByYXd0ZXh0X3JlYWQoc3RydWN0IGZpbGUg
KmZpbGUsIGNoYXIgX191c2VyICpidWYsCisJCQkgICAgc2l6ZV90IHNpemUsIGxvZmZfdCAqcHBv
cykKK3sKKwlzdHJ1Y3QgcmF3ZGF0YV9mX2RhdGEgKnByaXZhdGUgPSBmaWxlLT5wcml2YXRlX2Rh
dGE7CisJdW5zaWduZWQgbG9uZyB0ZXh0X29mZnNldCA9IHByaXZhdGUtPmxvYWRkYXRhLT5yYXdf
dGV4dF9vZmZzZXQ7CisJc2l6ZV90IHRleHRfc2l6ZSA9IHByaXZhdGUtPmxvYWRkYXRhLT5yYXdf
dGV4dF9zaXplOworCisJcmV0dXJuIHNpbXBsZV9yZWFkX2Zyb21fYnVmZmVyKGJ1Ziwgc2l6ZSwg
cHBvcywKKwkJCQkgICAgICAgUkFXREFUQV9GX0RBVEFfQlVGKHByaXZhdGUpICsKKwkJCQkgICAg
ICAgdGV4dF9vZmZzZXQsIHRleHRfc2l6ZSk7Cit9CisKIHN0YXRpYyBzc2l6ZV90IHJhd2RhdGFf
cmVhZChzdHJ1Y3QgZmlsZSAqZmlsZSwgY2hhciBfX3VzZXIgKmJ1Ziwgc2l6ZV90IHNpemUsCiAJ
CQkgICAgbG9mZl90ICpwcG9zKQogewpAQCAtMTM5OSw2ICsxNDExLDEzIEBAIHN0YXRpYyBjb25z
dCBzdHJ1Y3QgZmlsZV9vcGVyYXRpb25zIHJhd2RhdGFfZm9wcyA9IHsKIAkucmVsZWFzZSA9IHJh
d2RhdGFfcmVsZWFzZSwKIH07CiAKK3N0YXRpYyBjb25zdCBzdHJ1Y3QgZmlsZV9vcGVyYXRpb25z
IHJhd3RleHRfZm9wcyA9IHsKKwkub3BlbiA9IHJhd2RhdGFfb3BlbiwKKwkucmVhZCA9IHJhd3Rl
eHRfcmVhZCwKKwkubGxzZWVrID0gZ2VuZXJpY19maWxlX2xsc2VlaywKKwkucmVsZWFzZSA9IHJh
d2RhdGFfcmVsZWFzZSwKK307CisKIHN0YXRpYyB2b2lkIHJlbW92ZV9yYXdkYXRhX2RlbnRzKHN0
cnVjdCBhYV9sb2FkZGF0YSAqcmF3ZGF0YSkKIHsKIAlpbnQgaTsKQEAgLTE0NzUsNiArMTQ5NCwx
NCBAQCBpbnQgX19hYV9mc19jcmVhdGVfcmF3ZGF0YShzdHJ1Y3QgYWFfbnMgKm5zLCBzdHJ1Y3Qg
YWFfbG9hZGRhdGEgKnJhd2RhdGEpCiAJCWdvdG8gZmFpbDsKIAlyYXdkYXRhLT5kZW50c1tBQUZT
X0xPQUREQVRBX0NPTVBSRVNTRURfU0laRV0gPSBkZW50OwogCisJaWYgKGFhX2dfcmF3X3RleHQp
IHsKKwkJZGVudCA9IGFhZnNfY3JlYXRlX2ZpbGUoInJhd190ZXh0IiwgU19JRlJFRyB8IDA0NDQs
IGRpciwKKwkJCQkJcmF3ZGF0YSwgJnJhd3RleHRfZm9wcyk7CisJCWlmIChJU19FUlIoZGVudCkp
CisJCQlnb3RvIGZhaWw7CisJCXJhd2RhdGEtPmRlbnRzW0FBRlNfTE9BRERBVEFfVEVYVF0gPSBk
ZW50OworCX0KKwogCWRlbnQgPSBhYWZzX2NyZWF0ZV9maWxlKCJyYXdfZGF0YSIsIFNfSUZSRUcg
fCAwNDQ0LAogCQkJCSAgICAgIGRpciwgcmF3ZGF0YSwgJnJhd2RhdGFfZm9wcyk7CiAJaWYgKElT
X0VSUihkZW50KSkKQEAgLTE2NDksNiArMTY3NiwxNCBAQCBzdGF0aWMgY29uc3QgY2hhciAqcmF3
ZGF0YV9nZXRfbGlua19kYXRhKHN0cnVjdCBkZW50cnkgKmRlbnRyeSwKIAlyZXR1cm4gcmF3ZGF0
YV9nZXRfbGlua19iYXNlKGRlbnRyeSwgaW5vZGUsIGRvbmUsICJyYXdfZGF0YSIpOwogfQogCisK
K3N0YXRpYyBjb25zdCBjaGFyICpyYXdkYXRhX2dldF9saW5rX3RleHQoc3RydWN0IGRlbnRyeSAq
ZGVudHJ5LAorCQkJCQkgc3RydWN0IGlub2RlICppbm9kZSwKKwkJCQkJIHN0cnVjdCBkZWxheWVk
X2NhbGwgKmRvbmUpCit7CisJcmV0dXJuIHJhd2RhdGFfZ2V0X2xpbmtfYmFzZShkZW50cnksIGlu
b2RlLCBkb25lLCAicmF3X3RleHQiKTsKK30KKwogc3RhdGljIGNvbnN0IHN0cnVjdCBpbm9kZV9v
cGVyYXRpb25zIHJhd2RhdGFfbGlua19zaGExX2lvcHMgPSB7CiAJLmdldF9saW5rCT0gcmF3ZGF0
YV9nZXRfbGlua19zaGExLAogfTsKQEAgLTE2NTksNiArMTY5NCw5IEBAIHN0YXRpYyBjb25zdCBz
dHJ1Y3QgaW5vZGVfb3BlcmF0aW9ucyByYXdkYXRhX2xpbmtfYWJpX2lvcHMgPSB7CiBzdGF0aWMg
Y29uc3Qgc3RydWN0IGlub2RlX29wZXJhdGlvbnMgcmF3ZGF0YV9saW5rX2RhdGFfaW9wcyA9IHsK
IAkuZ2V0X2xpbmsJPSByYXdkYXRhX2dldF9saW5rX2RhdGEsCiB9Oworc3RhdGljIGNvbnN0IHN0
cnVjdCBpbm9kZV9vcGVyYXRpb25zIHJhd2RhdGFfbGlua190ZXh0X2lvcHMgPSB7CisJLmdldF9s
aW5rCT0gcmF3ZGF0YV9nZXRfbGlua190ZXh0LAorfTsKIAogCiAvKgpAQCAtMTc1NCw2ICsxNzky
LDE0IEBAIGludCBfX2FhZnNfcHJvZmlsZV9ta2RpcihzdHJ1Y3QgYWFfcHJvZmlsZSAqcHJvZmls
ZSwgc3RydWN0IGRlbnRyeSAqcGFyZW50KQogCQkJZ290byBmYWlsOwogCQlhYV9nZXRfcHJveHko
cHJvZmlsZS0+bGFiZWwucHJveHkpOwogCQlwcm9maWxlLT5kZW50c1tBQUZTX1BST0ZfUkFXX0RB
VEFdID0gZGVudDsKKworCQlkZW50ID0gYWFmc19jcmVhdGUoInJhd190ZXh0IiwgU19JRkxOSyB8
IDA0NDQsIGRpciwKKwkJCQkgICBwcm9maWxlLT5sYWJlbC5wcm94eSwgTlVMTCwgTlVMTCwKKwkJ
CQkgICAmcmF3ZGF0YV9saW5rX3RleHRfaW9wcyk7CisJCWlmIChJU19FUlIoZGVudCkpCisJCQln
b3RvIGZhaWw7CisJCWFhX2dldF9wcm94eShwcm9maWxlLT5sYWJlbC5wcm94eSk7CisJCXByb2Zp
bGUtPmRlbnRzW0FBRlNfUFJPRl9SQVdfVEVYVF0gPSBkZW50OwogCX0KIAogCWxpc3RfZm9yX2Vh
Y2hfZW50cnkoY2hpbGQsICZwcm9maWxlLT5iYXNlLnByb2ZpbGVzLCBiYXNlLmxpc3QpIHsKZGlm
ZiAtLWdpdCBhL3NlY3VyaXR5L2FwcGFybW9yL2luY2x1ZGUvYXBwYXJtb3IuaCBiL3NlY3VyaXR5
L2FwcGFybW9yL2luY2x1ZGUvYXBwYXJtb3IuaAppbmRleCAxZmJhYmRiNTY1YTguLjQxNGYxMjk4
YmYzYyAxMDA2NDQKLS0tIGEvc2VjdXJpdHkvYXBwYXJtb3IvaW5jbHVkZS9hcHBhcm1vci5oCisr
KyBiL3NlY3VyaXR5L2FwcGFybW9yL2luY2x1ZGUvYXBwYXJtb3IuaApAQCAtNDEsNSArNDEsNiBA
QCBleHRlcm4gYm9vbCBhYV9nX2xvY2tfcG9saWN5OwogZXh0ZXJuIGJvb2wgYWFfZ19sb2dzeXNj
YWxsOwogZXh0ZXJuIGJvb2wgYWFfZ19wYXJhbm9pZF9sb2FkOwogZXh0ZXJuIHVuc2lnbmVkIGlu
dCBhYV9nX3BhdGhfbWF4OworZXh0ZXJuIGJvb2wgYWFfZ19yYXdfdGV4dDsKIAogI2VuZGlmIC8q
IF9fQVBQQVJNT1JfSCAqLwpkaWZmIC0tZ2l0IGEvc2VjdXJpdHkvYXBwYXJtb3IvaW5jbHVkZS9h
cHBhcm1vcmZzLmggYi9zZWN1cml0eS9hcHBhcm1vci9pbmNsdWRlL2FwcGFybW9yZnMuaAppbmRl
eCA2ZTE0ZjZjZWNkYjkuLjg2ODg5NDZjOTY5ZiAxMDA2NDQKLS0tIGEvc2VjdXJpdHkvYXBwYXJt
b3IvaW5jbHVkZS9hcHBhcm1vcmZzLmgKKysrIGIvc2VjdXJpdHkvYXBwYXJtb3IvaW5jbHVkZS9h
cHBhcm1vcmZzLmgKQEAgLTg5LDYgKzg5LDcgQEAgZW51bSBhYWZzX3Byb2ZfdHlwZSB7CiAJQUFG
U19QUk9GX1JBV19EQVRBLAogCUFBRlNfUFJPRl9SQVdfSEFTSCwKIAlBQUZTX1BST0ZfUkFXX0FC
SSwKKwlBQUZTX1BST0ZfUkFXX1RFWFQsCiAJQUFGU19QUk9GX1NJWkVPRiwKIH07CiAKZGlmZiAt
LWdpdCBhL3NlY3VyaXR5L2FwcGFybW9yL2luY2x1ZGUvcG9saWN5X3VucGFjay5oIGIvc2VjdXJp
dHkvYXBwYXJtb3IvaW5jbHVkZS9wb2xpY3lfdW5wYWNrLmgKaW5kZXggZTBlMWNhN2ViYzM4Li45
YTc5YWQ4ZDM0MzkgMTAwNjQ0Ci0tLSBhL3NlY3VyaXR5L2FwcGFybW9yL2luY2x1ZGUvcG9saWN5
X3VucGFjay5oCisrKyBiL3NlY3VyaXR5L2FwcGFybW9yL2luY2x1ZGUvcG9saWN5X3VucGFjay5o
CkBAIC00Miw2ICs0Miw3IEBAIGVudW0gewogCUFBRlNfTE9BRERBVEFfSEFTSCwKIAlBQUZTX0xP
QUREQVRBX0RBVEEsCiAJQUFGU19MT0FEREFUQV9DT01QUkVTU0VEX1NJWkUsCisJQUFGU19MT0FE
REFUQV9URVhULAogCUFBRlNfTE9BRERBVEFfRElSLAkJLyogbXVzdCBiZSBsYXN0IGFjdHVhbCBl
bnRyeSAqLwogCUFBRlNfTE9BRERBVEFfTkRFTlRTCQkvKiBjb3VudCBvZiBlbnRyaWVzICovCiB9
OwpAQCAtNjcsNiArNjgsOCBAQCBzdHJ1Y3QgYWFfbG9hZGRhdGEgewogCWxvbmcgcmV2aXNpb247
CQkJLyogdGhlIG5zIHBvbGljeSByZXZpc2lvbiB0aGlzIGNhdXNlZCAqLwogCWludCBhYmk7CiAJ
dW5zaWduZWQgY2hhciAqaGFzaDsKKwl1bnNpZ25lZCBsb25nIHJhd190ZXh0X29mZnNldDsJLyog
dGhlIG9mZnNldCBvZiBkYXRhIHRvIHRoZSByYXdfdGV4dCovCisJc2l6ZV90IHJhd190ZXh0X3Np
emU7CQkvKiB0aGUgc2l6ZSBvZiB0aGUgcmF3IHRleHQgcG9saWN5ICovCiAKIAkvKiBQb2ludGVy
IHRvIHBheWxvYWQuIElmIEBjb21wcmVzc2VkX3NpemUgPiAwLCB0aGVuIHRoaXMgaXMgdGhlCiAJ
ICogY29tcHJlc3NlZCB2ZXJzaW9uIG9mIHRoZSBwYXlsb2FkLCBlbHNlIGl0IGlzIHRoZSB1bmNv
bXByZXNzZWQKZGlmZiAtLWdpdCBhL3NlY3VyaXR5L2FwcGFybW9yL2xzbS5jIGIvc2VjdXJpdHkv
YXBwYXJtb3IvbHNtLmMKaW5kZXggZjcyNDA2ZmUxYmYyLi5lM2I1YjJkZmFjNGEgMTAwNjQ0Ci0t
LSBhL3NlY3VyaXR5L2FwcGFybW9yL2xzbS5jCisrKyBiL3NlY3VyaXR5L2FwcGFybW9yL2xzbS5j
CkBAIC0xMzc1LDYgKzEzNzUsMTIgQEAgbW9kdWxlX3BhcmFtX25hbWVkKHBhdGhfbWF4LCBhYV9n
X3BhdGhfbWF4LCBhYXVpbnQsIFNfSVJVU1IpOwogYm9vbCBhYV9nX3BhcmFub2lkX2xvYWQgPSB0
cnVlOwogbW9kdWxlX3BhcmFtX25hbWVkKHBhcmFub2lkX2xvYWQsIGFhX2dfcGFyYW5vaWRfbG9h
ZCwgYWFib29sLCBTX0lSVUdPKTsKIAorLyogRGV0ZXJtaW5lcyBpZiByYXcgdGV4dCBwb2xpY3kg
aXMgYXZhaWxhYmxlICovCitib29sIGFhX2dfcmF3X3RleHQgPSBJU19FTkFCTEVEKENPTkZJR19T
RUNVUklUWV9BUFBBUk1PUl9URVhUX1BST0ZJTEUpOworI2lmZGVmIENPTkZJR19TRUNVUklUWV9B
UFBBUk1PUl9URVhUX1BST0ZJTEUKK21vZHVsZV9wYXJhbV9uYW1lZChyYXdfdGV4dCwgYWFfZ19y
YXdfdGV4dCwgYWFib29sLCAwNjAwKTsKKyNlbmRpZgorCiBzdGF0aWMgaW50IHBhcmFtX2dldF9h
YWludGJvb2woY2hhciAqYnVmZmVyLCBjb25zdCBzdHJ1Y3Qga2VybmVsX3BhcmFtICprcCk7CiBz
dGF0aWMgaW50IHBhcmFtX3NldF9hYWludGJvb2woY29uc3QgY2hhciAqdmFsLCBjb25zdCBzdHJ1
Y3Qga2VybmVsX3BhcmFtICprcCk7CiAjZGVmaW5lIHBhcmFtX2NoZWNrX2FhaW50Ym9vbCBwYXJh
bV9jaGVja19pbnQKZGlmZiAtLWdpdCBhL3NlY3VyaXR5L2FwcGFybW9yL3BvbGljeV91bnBhY2su
YyBiL3NlY3VyaXR5L2FwcGFybW9yL3BvbGljeV91bnBhY2suYwppbmRleCA0ZTFmOTZiMjE2YTgu
LjkwMmU1ZjM2ZmY4MiAxMDA2NDQKLS0tIGEvc2VjdXJpdHkvYXBwYXJtb3IvcG9saWN5X3VucGFj
ay5jCisrKyBiL3NlY3VyaXR5L2FwcGFybW9yL3BvbGljeV91bnBhY2suYwpAQCAtNjY4LDEzICs2
NjgsMTkgQEAgc3RhdGljIGludCBkYXRhY21wKHN0cnVjdCByaGFzaHRhYmxlX2NvbXBhcmVfYXJn
ICphcmcsIGNvbnN0IHZvaWQgKm9iaikKIC8qKgogICogdW5wYWNrX3Byb2ZpbGUgLSB1bnBhY2sg
YSBzZXJpYWxpemVkIHByb2ZpbGUKICAqIEBlOiBzZXJpYWxpemVkIGRhdGEgZXh0ZW50IGluZm9y
bWF0aW9uIChOT1QgTlVMTCkKKyAqIEBuc19uYW1lOiAgcG9pbnRlciB0byB0aGUgc3RyaW5nIGNv
bnRhaW5pbmcgdGhlIG5zIG5hbWUKKyAqIEByYXdfdGV4dF9zaXplOiBwb2ludGVyIHRvIHRoZSBz
aXplIG9mIHRoZSByYXcgdGV4dCBwcm9maWxlCisgKiBAcmF3X3RleHRfb2Zmc2V0OiBwb2ludGVy
IHRvIHRoZSBvZmZzZXQgb2YgdGhlIHJhdyBwcm9maWxlIGluIGRhdGEKICAqCiAgKiBOT1RFOiB1
bnBhY2sgcHJvZmlsZSBzZXRzIGF1ZGl0IHN0cnVjdCBpZiB0aGVyZSBpcyBhIGZhaWx1cmUKICAq
Lwotc3RhdGljIHN0cnVjdCBhYV9wcm9maWxlICp1bnBhY2tfcHJvZmlsZShzdHJ1Y3QgYWFfZXh0
ICplLCBjaGFyICoqbnNfbmFtZSkKK3N0YXRpYyBzdHJ1Y3QgYWFfcHJvZmlsZSAqdW5wYWNrX3By
b2ZpbGUoc3RydWN0IGFhX2V4dCAqZSwKKwkJCQkJIGNoYXIgKipuc19uYW1lLAorCQkJCQkgc2l6
ZV90ICpyYXdfdGV4dF9zaXplLAorCQkJCQkgdW5zaWduZWQgbG9uZyAqcmF3X3RleHRfb2Zmc2V0
KQogewogCXN0cnVjdCBhYV9wcm9maWxlICpwcm9maWxlID0gTlVMTDsKLQljb25zdCBjaGFyICp0
bXBuYW1lLCAqdG1wbnMgPSBOVUxMLCAqbmFtZSA9IE5VTEw7CisJY29uc3QgY2hhciAqdG1wbmFt
ZSwgKnRtcHRleHQsICp0bXBucyA9IE5VTEwsICpuYW1lID0gTlVMTDsKIAljb25zdCBjaGFyICpp
bmZvID0gImZhaWxlZCB0byB1bnBhY2sgcHJvZmlsZSI7CiAJc2l6ZV90IG5zX2xlbjsKIAlzdHJ1
Y3Qgcmhhc2h0YWJsZV9wYXJhbXMgcGFyYW1zID0geyAwIH07CkBAIC05MTcsNiArOTIzLDEyIEBA
IHN0YXRpYyBzdHJ1Y3QgYWFfcHJvZmlsZSAqdW5wYWNrX3Byb2ZpbGUoc3RydWN0IGFhX2V4dCAq
ZSwgY2hhciAqKm5zX25hbWUpCiAJCX0KIAl9CiAKKwkvKiB0ZXh0IHBvbGljeSBpcyBvcHRpbmFs
ICovCisJKnJhd190ZXh0X3NpemUgPSB1bnBhY2tfc3RyKGUsICZ0bXB0ZXh0LCAidGV4dF9wb2xp
Y3kiKTsKKwlpZiAoKnJhd190ZXh0X3NpemUpIHsKKwkJKnJhd190ZXh0X29mZnNldCA9ICh2b2lk
ICopIHRtcHRleHQgLSBlLT5zdGFydDsKKwl9CisKIAlpZiAoIXVucGFja19uYW1lWChlLCBBQV9T
VFJVQ1RFTkQsIE5VTEwpKSB7CiAJCWluZm8gPSAiZmFpbGVkIHRvIHVucGFjayBlbmQgb2YgcHJv
ZmlsZSI7CiAJCWdvdG8gZmFpbDsKQEAgLTExNzUsMTggKzExODcsMjcgQEAgaW50IGFhX3VucGFj
ayhzdHJ1Y3QgYWFfbG9hZGRhdGEgKnVkYXRhLCBzdHJ1Y3QgbGlzdF9oZWFkICpsaCwKIAkqbnMg
PSBOVUxMOwogCXdoaWxlIChlLnBvcyA8IGUuZW5kKSB7CiAJCWNoYXIgKm5zX25hbWUgPSBOVUxM
OworCQlzaXplX3QgcmF3X3RleHRfc2l6ZSA9IDA7CisJCXVuc2lnbmVkIGxvbmcgcmF3X3RleHRf
b2Zmc2V0OwogCQl2b2lkICpzdGFydDsKIAkJZXJyb3IgPSB2ZXJpZnlfaGVhZGVyKCZlLCBlLnBv
cyA9PSBlLnN0YXJ0LCBucyk7CiAJCWlmIChlcnJvcikKIAkJCWdvdG8gZmFpbDsKIAogCQlzdGFy
dCA9IGUucG9zOwotCQlwcm9maWxlID0gdW5wYWNrX3Byb2ZpbGUoJmUsICZuc19uYW1lKTsKKwkJ
cHJvZmlsZSA9IHVucGFja19wcm9maWxlKCZlLCAmbnNfbmFtZSwKKwkJCQkJICZyYXdfdGV4dF9z
aXplLAorCQkJCQkgJnJhd190ZXh0X29mZnNldCk7CiAJCWlmIChJU19FUlIocHJvZmlsZSkpIHsK
IAkJCWVycm9yID0gUFRSX0VSUihwcm9maWxlKTsKIAkJCWdvdG8gZmFpbDsKIAkJfQogCisJCWlm
IChhYV9nX3Jhd190ZXh0ICYmIHJhd190ZXh0X3NpemUpIHsKKwkJCXVkYXRhLT5yYXdfdGV4dF9z
aXplID0gcmF3X3RleHRfc2l6ZTsKKwkJCXVkYXRhLT5yYXdfdGV4dF9vZmZzZXQgPSByYXdfdGV4
dF9vZmZzZXQ7CisJCX0KKwogCQllcnJvciA9IHZlcmlmeV9wcm9maWxlKHByb2ZpbGUpOwogCQlp
ZiAoZXJyb3IpCiAJCQlnb3RvIGZhaWxfcHJvZmlsZTsKLS0gCjIuMjUuMQoKCi0tIApBcHBBcm1v
ciBtYWlsaW5nIGxpc3QKQXBwQXJtb3JAbGlzdHMudWJ1bnR1LmNvbQpNb2RpZnkgc2V0dGluZ3Mg
b3IgdW5zdWJzY3JpYmUgYXQ6IGh0dHBzOi8vbGlzdHMudWJ1bnR1LmNvbS9tYWlsbWFuL2xpc3Rp
bmZvL2FwcGFybW9yCg==
